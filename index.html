<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psycho-Parfait Final v8</title>
    <style>
        /* --- åŸºæœ¬è¨­å®š --- */
        body {
            font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
            background: #d7ccc8;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #4e342e;
        }

        .main-container {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* --- ãƒ‘ãƒ•ã‚§è¡¨ç¤ºã‚¨ãƒªã‚¢ --- */
        .stage-area {
            position: relative;
            width: 320px;
            height: 600px;
            margin: 0 auto 20px;
        }

        /* ç”»åƒã®åŸºæœ¬è¨­å®š */
        .stage-area img {
            position: absolute;
            left: 0; 
            right: 0; 
            margin: auto; /* å·¦å³ä¸­å¤®æƒãˆ */
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* --- è³ªå•ãƒ»çµæœç”»é¢ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        .content-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 100%;
            max-width: 400px;
        }
        
        h1, h2 { color: #c2185b; margin-bottom: 15px; }
        p { line-height: 1.6; margin-bottom: 20px; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .select-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: #5d4037;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70px; /* å°‘ã—é«˜ã•ã‚’èª¿æ•´ */
        }

        .select-btn:hover {
            background: #efebe9;
            border-color: #8d6e63;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        /* æ–‡å­—ã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
        .btn-item { 
            font-size: 1.05rem; 
            font-weight: bold; 
            color: #5d4037; 
            display: block;
        }
        
        .hidden { display: none; }

        .action-btn {
            padding: 14px 50px;
            background: linear-gradient(45deg, #f06292, #ec407a);
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.6);
        }
    </style>
</head>
<body>

    <div class="main-container">
        
        <div class="stage-area">
            <img id="layer1-img" src="images/layer1_pink.png" class="hidden"
                 style="bottom: 125px; z-index: 10; width: 90px !important;">

            <img id="layer2-img" src="images/layer2_pink.png" class="hidden"
                 style="bottom: 175px; z-index: 20; width: 130px !important;">

            <img id="layer3-img" src="images/layer3_pink.png" class="hidden"
                 style="bottom: 225px; z-index: 30; width: 160px !important;">

            <img id="cream-img"  src="images/cream_pink.png"  class="hidden"
                 style="bottom: 270px; z-index: 105; width: 170px !important;">

            <img id="ice-img"    src="images/ice_pink.png"    class="hidden"
                 style="bottom: 300px; z-index: 106; width: 160px !important;">

            <img id="top-img"    src="images/top_pink.png"    class="hidden"
                 style="bottom: 355px; z-index: 107; width: 60px !important;">
            
            <img id="glass-img"  src="images/glass.png"
                 style="bottom: 0px; z-index: 100; width: 300px !important;">

            <img id="ribbon-img" src="images/ribbon_pink.png" class="hidden"
                 style="bottom: 45px; z-index: 110; width: 120px !important;">
        </div>

        <div id="question-screen" class="content-box">
            <h2 id="q-text">è³ªå•æ–‡ãŒã“ã“ã«å…¥ã‚Šã¾ã™</h2>
            <div id="options-area" class="options-grid">
                </div>
        </div>

        <div id="result-screen" class="content-box hidden">
            <h1>å®Œæˆã—ã¾ã—ãŸï¼</h1>
            <p>ã‚ãªãŸã®æ·±å±¤å¿ƒç†ã‚¿ã‚¤ãƒ—ã¯â€¦</p>
            <h2 id="result-title" style="font-size: 1.4rem;">ã‚¿ã‚¤ãƒ—å</h2>
            <p id="result-text" style="font-size: 0.95rem;">è¨ºæ–­çµæœã®æ–‡ç« </p>
            <button class="action-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ä½œã‚‹</button>
        </div>

    </div>

    <script>
        // --- è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ ---
        // â€» word ã¯å†…éƒ¨è¨ˆç®—ç”¨ã¨ã—ã¦æ®‹ã—ã¦ã„ã¾ã™ãŒã€ç”»é¢ã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“
        const questions = [
            // Q1: ä¸‹æ®µ
            {
                text: "ã¾ãšã¯ä¸€ç•ªä¸‹ã®å±¤ã‚’é¸ã‚“ã§ã­",
                type: "select",
                options: [
                    { word: "é­”æ€§ã®", item: "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒãƒ³ãƒ", color: "pink", img: "layer1" },
                    { word: "å„ªé›…ãª", item: "ã‚ã‚“ã“",         color: "blue", img: "layer1" },
                    { word: "ç†±è¡€ãª", item: "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ", color: "red", img: "layer1" },
                    { word: "æ„‰å¿«ãª", item: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼",   color: "yellow",img: "layer1" }
                ]
            },
            // Q2: ä¸­æ®µ
            {
                text: "æ¬¡ã¯çœŸã‚“ä¸­ã®å±¤ï¼",
                type: "select",
                options: [
                    { word: "æŸ”ã‚‰ã‹ã„", item: "ã‚¹ãƒãƒ³ã‚¸",       color: "pink", img: "layer2" },
                    { word: "å³ã—ã„",   item: "ã‚³ãƒ¼ãƒ³ãƒ•ãƒ¬ãƒ¼ã‚¯", color: "blue", img: "layer2" },
                    { word: "æš‘è‹¦ã—ã„", item: "ãƒ—ãƒªãƒ³",         color: "red",  img: "layer2" },
                    { word: "çœ©ã—ã„",   item: "ç™½ç‰",           color: "yellow",img: "layer2" }
                ]
            },
            // Q3: ä¸Šæ®µ
            {
                text: "ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’é‡ã­ã‚ˆã†",
                type: "select",
                options: [
                    { word: "é­…åŠ›çš„ãª", item: "ã„ã¡ã”",         color: "pink", img: "layer3" },
                    { word: "å†·é™ã§",   item: "ã‚­ã‚¦ã‚¤",         color: "blue", img: "layer3" },
                    { word: "ç¤¾äº¤çš„ãª", item: "ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼",   color: "red",  img: "layer3" },
                    { word: "åœ§å€’çš„ãª", item: "ãƒãƒŠãƒŠ",         color: "yellow",img: "layer3" }
                ]
            },
            // Q4: ã‚¯ãƒªãƒ¼ãƒ 
            {
                text: "ã“ã“ã§ã‚¯ãƒªãƒ¼ãƒ ã®ç™»å ´ï¼",
                type: "select",
                options: [
                    { word: "å¦–ç²¾",     item: "ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ",   color: "pink",   img: "cream" },
                    { word: "æ¼å¸«",     item: "ã‚¯ãƒªãƒ¼ãƒ ãƒãƒ¼ã‚º",     color: "blue",   img: "cream" },
                    { word: "å†’é™ºè€…",   item: "ã‚«ã‚¹ã‚¿ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ ", color: "red",    img: "cream" },
                    { word: "å¤©ä½¿",     item: "èƒ¡éº»ã‚¯ãƒªãƒ¼ãƒ ",       color: "yellow", img: "cream" }
                ]
            },
            // Q5: ã‚¢ã‚¤ã‚¹
            {
                text: "ãƒ¡ã‚¤ãƒ³ã®ã‚¢ã‚¤ã‚¹ã‚’ã©ã†ã",
                type: "select",
                options: [
                    { word: "ã ã‘ã©",   item: "ãƒãƒ‹ãƒ©",         color: "pink", img: "ice" },
                    { word: "ã•ã‚‰ã«",   item: "ãƒŸãƒ³ãƒˆ",         color: "blue", img: "ice" },
                    { word: "ã‚„ã£ã±ã‚Š", item: "ãƒãƒ§ã‚³",         color: "red",  img: "ice" },
                    { word: "ã“ã‚“ãªã‚ã‘ã§", item: "æŠ¹èŒ¶",       color: "yellow",img: "ice" }
                ]
            },
            // Q6: ãƒˆãƒƒãƒ”ãƒ³ã‚°
            {
                text: "ãƒˆãƒƒãƒ”ãƒ³ã‚°ã§é£¾ã‚ã†",
                type: "select",
                options: [
                    { word: "å±ãªã„",   item: "ãƒã‚·ãƒ¥ãƒãƒ­",     color: "pink", img: "top" },
                    { word: "çˆ½ã‚„ã‹ãª", item: "ãƒ“ã‚¹ã‚±ãƒƒãƒˆ",     color: "blue", img: "top" },
                    { word: "ã‚¢ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãª", item: "ãƒãƒ§ã‚³ã‚½ãƒ¼ã‚¹", color: "red", img: "top" },
                    { word: "æ˜ã‚‹ã„",   item: "ããªã“",         color: "yellow",img: "top" }
                ]
            },
            // Q7: ãƒªãƒœãƒ³
            {
                text: "ä»•ä¸Šã’ã®ãƒªãƒœãƒ³ã‚’é¸ã‚“ã§ã­",
                type: "select",
                options: [
                    { word: "æ„›ã®",     item: "ãƒ”ãƒ³ã‚¯",         color: "pink", img: "ribbon" },
                    { word: "çŸ¥æ€§ã®",   item: "æ°´è‰²",           color: "blue", img: "ribbon" },
                    { word: "æƒ…ç†±ã®",   item: "ã‚ã‹",           color: "red",  img: "ribbon" },
                    { word: "å¸Œæœ›ã®",   item: "é»„è‰²",           color: "yellow",img: "ribbon" }
                ]
            }
        ];

        let currentStep = 0;
        let scoreTally = { pink: 0, blue: 0, red: 0, yellow: 0 };

        const qText = document.getElementById("q-text");
        const optionsArea = document.getElementById("options-area");

        // åˆæœŸå®Ÿè¡Œ
        showQuestion();

        function showQuestion() {
            const q = questions[currentStep];
            qText.textContent = q.text;
            
            // ã‚¨ãƒªã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆ
            optionsArea.innerHTML = "";
            optionsArea.classList.remove("hidden");
            
            // ãƒœã‚¿ãƒ³ç”Ÿæˆ
            q.options.forEach(opt => {
                const btn = document.createElement("div");
                btn.className = "select-btn";
                // ã€å¤‰æ›´ç‚¹ã€‘å½¢å®¹è©(opt.word)ã‚’è¡¨ç¤ºã›ãšã€å…·æå(opt.item)ã ã‘ã‚’è¡¨ç¤º
                btn.innerHTML = `
                    <span class="btn-item">${opt.item}</span>
                `;
                btn.onclick = () => selectOption(opt);
                optionsArea.appendChild(btn);
            });
        }

        function selectOption(opt) {
            // ã‚¹ã‚³ã‚¢é›†è¨ˆï¼ˆè¨ºæ–­å¯¾è±¡ã®è‰²ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆï¼‰
            if (scoreTally[opt.color] !== undefined) {
                scoreTally[opt.color]++;
            }
            
            // ç”»åƒè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
            const imgId = opt.img + "-img"; 
            const imgEl = document.getElementById(imgId);
            if(imgEl) {
                // é€šå¸¸é€šã‚Šãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä½œæˆ (ä¾‹: images/cream_blue.png)
                imgEl.src = `images/${opt.img}_${opt.color}.png`;
                imgEl.classList.remove("hidden");
            }
            
            nextStep();
        }

        function nextStep() {
            currentStep++;
            if (currentStep < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('question-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // æœ€ã‚‚å¤šã„è‰²ã‚’åˆ¤å®š
            let maxColor = Object.keys(scoreTally).reduce((a, b) => scoreTally[a] >= scoreTally[b] ? a : b);
            
            let resultTitle = "";
            let resultText = "";
            let titleColor = "#333";

            // çµæœåˆ¤å®š
            if (maxColor === 'pink') {
                resultTitle = "ã»ã£ã“ã‚Šã•ã‚“ã‚¿ã‚¤ãƒ—";
                resultText = "ã¿ã‚“ãªã‚’ç¬‘é¡”ã«ã•ã›ã‚‹å¤©æ‰âœ¨<br>å‘¨ã‚Šã‚’ç™’ã—ã¦ãã‚Œã‚‹ã¬ã„ãã‚‹ã¿ã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ğŸ’–";
                titleColor = "#e91e63"; 
            } else if (maxColor === 'blue') {
                resultTitle = "ã•ã‚ã‚„ã‹ã•ã‚“ã‚¿ã‚¤ãƒ—";
                resultText = "ã‚ãªãŸãŒã„ã‚Œã°ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¯ãƒ¼ã‚¯ã¯å®‰å¿ƒâœ¨<br>å†·é™ã«å‘¨ã‚Šã‚’è¦‹ã¦ãã‚Œã‚‹å…ˆç”Ÿã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ğŸ’–";
                titleColor = "#00bcd4"; 
            } else if (maxColor === 'red') {
                resultTitle = "ãƒªãƒ¼ãƒ€ãƒ¼ã•ã‚“ã‚¿ã‚¤ãƒ—";
                resultText = "ã¿ã‚“ãªãŒé ¼ã£ã¦ã—ã¾ã†ãƒªãƒ¼ãƒ€ãƒ¼âœ¨<br>çœŸã‚“ä¸­ã§ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å¼•ã£å¼µã£ã¦ã„ãå§¿ã¯ã‹ã£ã“ã„ã„ğŸ’–";
                titleColor = "#f44336"; 
            } else {
                resultTitle = "ã‚­ãƒ©ã‚­ãƒ©ã•ã‚“ã‚¿ã‚¤ãƒ—";
                resultText = "ã‚ãªãŸã¯ã¿ã‚“ãªã®å¤ªé™½ã¨ãªã‚‹æ˜ã‚‹ã„äººâœ¨<br>ã¿ã‚“ãªã®å…‰ã¨ãªã‚‹ã‚«ãƒªã‚¹ãƒæ€§ãŒã‚ã‚Šã¾ã™ğŸ’–";
                titleColor = "#fbc02d"; 
            }

            const titleEl = document.getElementById('result-title');
            titleEl.innerText = resultTitle;
            titleEl.style.color = titleColor;
            
            document.getElementById('result-text').innerHTML = resultText;
        }
    </script>
</body>
</html>