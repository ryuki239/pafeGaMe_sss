<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‘ãƒ•ã‚§è¨ºæ–­ã‚²ãƒ¼ãƒ  Final v8</title>
    <style>
        /* --- åŸºæœ¬è¨­å®š --- */
        body {
            font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
            background: #d7ccc8;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #4e342e;
        }

        .main-container {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* --- ãƒ‘ãƒ•ã‚§è¡¨ç¤ºã‚¨ãƒªã‚¢ --- */
        .stage-area {
            position: relative;
            width: 320px;
            height: 600px;
            margin: 0 auto 20px;
        }

        .stage-area img {
            position: absolute;
            left: 0; 
            right: 0; 
            margin: auto;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* --- å…±é€šãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        .content-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 100%;
            max-width: 400px;
        }
        
        h1 { color: #c2185b; margin-bottom: 10px; font-size: 1.8rem; }
        h2 { color: #c2185b; margin-bottom: 15px; }
        p { line-height: 1.6; margin-bottom: 20px; }

        .hidden { display: none; }

        /* --- ãƒœã‚¿ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        .action-btn {
            padding: 14px 50px;
            background: linear-gradient(45deg, #f06292, #ec407a);
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.6);
        }

        /* --- è³ªå•ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .select-btn {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: #5d4037;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70px;
        }

        .select-btn:hover {
            background: #efebe9;
            border-color: #8d6e63;
        }

        .btn-item { font-weight: bold; }

        /* çµæœç”¨äºŒã¤å */
        #result-catchphrase {
            font-size: 1.25rem;
            font-weight: bold;
            color: #ff69b4;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <div class="main-container">
        
        <div class="stage-area">
            <img id="layer1-img" src="" class="hidden" style="bottom: 125px; z-index: 10; width: 90px !important;">
            <img id="layer2-img" src="" class="hidden" style="bottom: 175px; z-index: 20; width: 130px !important;">
            <img id="layer3-img" src="" class="hidden" style="bottom: 225px; z-index: 30; width: 160px !important;">
            <img id="cream-img"  src="" class="hidden" style="bottom: 270px; z-index: 105; width: 170px !important;">
            <img id="ice-img"    src="" class="hidden" style="bottom: 300px; z-index: 106; width: 160px !important;">
            <img id="top-img"    src="" class="hidden" style="bottom: 355px; z-index: 107; width: 60px !important;">
            <img id="glass-img"  src="images/glass.png" style="bottom: 0px; z-index: 100; width: 300px !important;">
            <img id="ribbon-img" src="" class="hidden" style="bottom: 45px; z-index: 110; width: 120px !important;">
        </div>

        <div id="start-screen" class="content-box">
            <h1>ãƒ‘ãƒ•ã‚§è¨ºæ–­ã‚²ãƒ¼ãƒ </h1>
            <p>ä»Šã®æ°—åˆ†ã«åˆã‚ã›ã¦å…·æã‚’é¸ã³ã€<br>ã‚ãªãŸã ã‘ã®ã€Œæ·±å±¤å¿ƒç†ãƒ‘ãƒ•ã‚§ã€ã‚’<br>å®Œæˆã•ã›ã¾ã—ã‚‡ã†ã€‚</p>
            <button class="action-btn" onclick="startGame()">ãƒ‘ãƒ•ã‚§ã‚’ä½œã‚‹</button>
            <p style="font-size: 0.8rem; margin-top: 20px; color: #8d6e63;">ã‚¢ã‚¹ãƒ‘ãƒ©è£èµ·æ¯›</p>
        </div>

        <div id="question-screen" class="content-box hidden">
            <h2 id="q-text">è³ªå•æ–‡</h2>
            <div id="options-area" class="options-grid"></div>
        </div>

        <div id="result-screen" class="content-box hidden">
            <h1>å®Œæˆã—ã¾ã—ãŸï¼</h1>
            <p>ã‚ãªãŸã®æ·±å±¤å¿ƒç†ã‚¿ã‚¤ãƒ—ã¯â€¦</p>
            <div id="result-catchphrase"></div>
            <h2 id="result-title" style="font-size: 1.4rem; margin-top: 5px;"></h2>
            <p id="result-text" style="font-size: 0.95rem;"></p>
            <button class="action-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ä½œã‚‹</button>
        </div>

    </div>

    <script>
        const questions = [
            // 0: ä¸‹æ®µ
            { text: "ã¾ãšã¯ä¸€ç•ªä¸‹ã®å±¤ã‚’é¸ã‚“ã§ã­", options: [
                { word: "çœŸæ€§ã®", item: "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒãƒ³ãƒ", color: "pink", img: "layer1" },
                { word: "å„ªé›…ãª", item: "ã‚ã‚“ã“", color: "blue", img: "layer1" },
                { word: "ç†±è¡€ãª", item: "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ", color: "red", img: "layer1" },
                { word: "æ„‰å¿«ãª", item: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼", color: "yellow", img: "layer1" }
            ]},
            // 1: ä¸­æ®µ
            { text: "æ¬¡ã¯çœŸã‚“ä¸­ã®å±¤ï¼", options: [
                { word: "æŸ”ã‚‰ã‹ã„", item: "ã‚¹ãƒãƒ³ã‚¸", color: "pink", img: "layer2" },
                { word: "å³ã—ã„", item: "ã‚³ãƒ¼ãƒ³ãƒ•ãƒ¬ãƒ¼ã‚¯", color: "blue", img: "layer2" },
                { word: "æš‘è‹¦ã—ã„", item: "ãƒ—ãƒªãƒ³", color: "red", img: "layer2" },
                { word: "çœ©ã—ã„", item: "ç™½ç‰", color: "yellow", img: "layer2" }
            ]},
            // 2: ä¸Šæ®µ
            { text: "ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’é‡ã­ã‚ˆã†", options: [
                { word: "é­…åŠ›çš„ãª", item: "ã„ã¡ã”", color: "pink", img: "layer3" },
                { word: "å†·é™ã§", item: "ã‚­ã‚¦ã‚¤", color: "blue", img: "layer3" },
                { word: "ç¤¾äº¤çš„ãª", item: "ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼", color: "red", img: "layer3" },
                { word: "åœ§å€’çš„ãª", item: "ãƒãƒŠãƒŠ", color: "yellow", img: "layer3" }
            ]},
            // 3: ã‚¯ãƒªãƒ¼ãƒ  (ã“ã‚ŒãŒæœ€å¾Œã«ãã¾ã™)
            { text: "ã“ã“ã§ã‚¯ãƒªãƒ¼ãƒ ã®ç™»å ´ï¼", options: [
                { word: "å¦–ç²¾", item: "ãƒ›ã‚¤ãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ", color: "pink", img: "cream" },
                { word: "æ¼å¸«", item: "ã‚¯ãƒªãƒ¼ãƒ ãƒãƒ¼ã‚º", color: "blue", img: "cream" },
                { word: "å†’é™ºè€…", item: "ã‚«ã‚¹ã‚¿ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ ", color: "red", img: "cream" },
                { word: "å¤©ä½¿", item: "èƒ¡éº»ã‚¯ãƒªãƒ¼ãƒ ", color: "yellow", img: "cream" }
            ]},
            // 4: ã‚¢ã‚¤ã‚¹
            { text: "ãƒ¡ã‚¤ãƒ³ã®ã‚¢ã‚¤ã‚¹ã‚’ã©ã†ã", options: [
                { word: "ã ã‘ã©", item: "ãƒãƒ‹ãƒ©", color: "pink", img: "ice" },
                { word: "ã•ã‚‰ã«", item: "ãƒŸãƒ³ãƒˆ", color: "blue", img: "ice" },
                { word: "ã‚„ã£ã±ã‚Š", item: "ãƒãƒ§ã‚³", color: "red", img: "ice" },
                { word: "ã“ã‚“ãªã‚ã‘ã§", item: "æŠ¹èŒ¶", color: "yellow", img: "ice" }
            ]},
            // 5: ãƒˆãƒƒãƒ”ãƒ³ã‚°
            { text: "ãƒˆãƒƒãƒ”ãƒ³ã‚°ã§é£¾ã‚ã†", options: [
                { word: "å±ãªã„", item: "ãƒã‚·ãƒ¥ãƒãƒ­", color: "pink", img: "top" },
                { word: "çˆ½ã‚„ã‹ãª", item: "ãƒ“ã‚¹ã‚±ãƒƒãƒˆ", color: "blue", img: "top" },
                { word: "ã‚¢ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãª", item: "ãƒãƒ§ã‚³ã‚½ãƒ¼ã‚¹", color: "red", img: "top" },
                { word: "æ˜ã‚‹ã„", item: "ããªã“", color: "yellow", img: "top" }
            ]},
            // 6: ãƒªãƒœãƒ³ (äºŒã¤åã«ã¯å«ã‚ã¾ã›ã‚“)
            { text: "ä»•ä¸Šã’ã®ãƒªãƒœãƒ³ã‚’é¸ã‚“ã§ã­", options: [
                { word: "æ„›ã®", item: "ãƒ”ãƒ³ã‚¯", color: "pink", img: "ribbon" },
                { word: "çŸ¥æ€§ã®", item: "æ°´è‰²", color: "blue", img: "ribbon" },
                { word: "æƒ…ç†±ã®", item: "ã‚ã‹", color: "red", img: "ribbon" },
                { word: "å¸Œæœ›ã®", item: "é»„è‰²", color: "yellow", img: "ribbon" }
            ]}
        ];

        let currentStep = 0;
        let scoreTally = { pink: 0, blue: 0, red: 0, yellow: 0 };
        let selectedWords = [];

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('question-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentStep];
            document.getElementById("q-text").textContent = q.text;
            const area = document.getElementById("options-area");
            area.innerHTML = "";
            
            q.options.forEach(opt => {
                const btn = document.createElement("div");
                btn.className = "select-btn";
                btn.innerHTML = `<span class="btn-item">${opt.item}</span>`;
                btn.onclick = () => selectOption(opt);
                area.appendChild(btn);
            });
        }

        function selectOption(opt) {
            if (scoreTally[opt.color] !== undefined) scoreTally[opt.color]++;
            selectedWords.push(opt.word);
            
            const imgEl = document.getElementById(opt.img + "-img");
            if(imgEl) {
                imgEl.src = `images/${opt.img}_${opt.color}.png`;
                imgEl.classList.remove("hidden");
            }
            
            currentStep++;
            if (currentStep < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // ä¿®æ­£ç®‡æ‰€ï¼šäºŒã¤åã®é †ç•ªã‚’ä¸¦ã³æ›¿ãˆã‚‹
        function showResult() {
            document.getElementById('question-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // è³ªå•ã®é †ç•ª: 0:ä¸‹æ®µ, 1:ä¸­æ®µ, 2:ä¸Šæ®µ, 3:ã‚¯ãƒªãƒ¼ãƒ , 4:ã‚¢ã‚¤ã‚¹, 5:ãƒˆãƒƒãƒ”ãƒ³ã‚°
            // æœ›ã¾ã—ã„é †ç•ª: ä¸‹æ®µ(0) + ä¸­æ®µ(1) + ä¸Šæ®µ(2) + ã‚¢ã‚¤ã‚¹(4) + ãƒˆãƒƒãƒ”ãƒ³ã‚°(5) + ã‚¯ãƒªãƒ¼ãƒ (3)
            const catchphrase = 
                selectedWords[0] + 
                selectedWords[1] + 
                selectedWords[2] + 
                selectedWords[4] + 
                selectedWords[5] + 
                selectedWords[3]; // ã‚¯ãƒªãƒ¼ãƒ ã‚’æœ€å¾Œã«æŒã£ã¦ãã‚‹

            document.getElementById('result-catchphrase').innerText = catchphrase;

            let maxColor = Object.keys(scoreTally).reduce((a, b) => scoreTally[a] >= scoreTally[b] ? a : b);
            
            let title = "", text = "", color = "#333";

            if (maxColor === 'pink') {
                title = "ã»ã£ã“ã‚Šã•ã‚“ã‚¿ã‚¤ãƒ—";
                text = "ã¿ã‚“ãªã‚’ç¬‘é¡”ã«ã•ã›ã‚‹å¤©æ‰âœ¨<br>å‘¨ã‚Šã‚’ç™’ã—ã¦ãã‚Œã‚‹ã¬ã„ãã‚‹ã¿ã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ğŸ’–";
                color = "#e91e63"; 
            } else if (maxColor === 'blue') {
                title = "ã•ã‚ã‚„ã‹ã•ã‚“ã‚¿ã‚¤ãƒ—";
                text = "ã‚ãªãŸãŒã„ã‚Œã°ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¯ãƒ¼ã‚¯ã¯å®‰å¿ƒâœ¨<br>å†·é™ã«å‘¨ã‚Šã‚’è¦‹ã¦ãã‚Œã‚‹å…ˆç”Ÿã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ğŸ’–";
                color = "#00bcd4"; 
            } else if (maxColor === 'red') {
                title = "ãƒªãƒ¼ãƒ€ãƒ¼ã•ã‚“ã‚¿ã‚¤ãƒ—";
                text = "ã¿ã‚“ãªãŒé ¼ã£ã¦ã—ã¾ã†ãƒªãƒ¼ãƒ€ãƒ¼âœ¨<br>çœŸã‚“ä¸­ã§ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å¼•ã£å¼µã£ã¦ã„ãå§¿ã¯ã‹ã£ã“ã„ã„ğŸ’–";
                color = "#f44336"; 
            } else {
                title = "ã‚­ãƒ©ã‚­ãƒ©ã•ã‚“ã‚¿ã‚¤ãƒ—";
                text = "ã‚ãªãŸã¯ã¿ã‚“ãªã®å¤ªé™½ã¨ãªã‚‹æ˜ã‚‹ã„äººâœ¨<br>ã¿ã‚“ãªã®å…‰ã¨ãªã‚‹ã‚«ãƒªã‚¹ãƒæ€§ãŒã‚ã‚Šã¾ã™ğŸ’–";
                color = "#fbc02d"; 
            }

            const titleEl = document.getElementById('result-title');
            titleEl.innerText = title;
            titleEl.style.color = color;
            document.getElementById('result-text').innerHTML = text;
        }
    </script>
</body>
</html>